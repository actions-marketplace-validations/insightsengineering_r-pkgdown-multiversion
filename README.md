# MultiVersion pkgdown docs action

## Description

Github Action to generate multiple versions of pkgdown docs for R packages.
Additional assumptions:

* As a pre-requisite require R package documentation generated by R function `pkgdown::build_site` (included in example as job `pkgdown`)
* Versioning - release naming convention like `v0.0.1`.
* Tag specific documentation have to be pushed to `gh-pages` subfolder with the `tag` name (step `Unpack release pkgdown to tag dedicated subfolder` in the example below).
* To publish multi-version documentation on Github Pages
  * The `gh-pages` branch have to be checked out before the execution of the`multiversion-docs` step.
  * Changed files have to be pushed after this step.

## Usage

Please refer to [this example](https://github.com/insightsengineering/r.pkg.template/blob/main/.github/workflows/pkgdown.yaml) workflow to view how this action can be used.

## Action type

Composite

## Inputs

* `path`:

    _Description_: Path to package's root

    _Required_: false

    _Default_: "."

* `release_name`:

    _Description_: latest/main, pre-release or new_tag_string (e.g. "v0.8.0") which will be used for R script to change links

    _Required_: true

    _Default_: "main"

## Environments variables

Environment variables that allow to change how the solution works.

* `MS_ADD_LINKS_AFTER`:

    _Description_: Add links to documentation menu next to each item.
    Additional information:
  * If an R package contains the `NEWS.md` file, then `pkgdown` creates two menus _Reference_  and  _Changelog_. This happens most often and it is the reason why the `Changelog`  value is configured by default.
  * First menu _Reference_ is created by default.

    _Required_: false

    _Default_: "Changelog"

## Links

[R pkgdown package](https://pkgdown.r-lib.org/)

[Git Basics - Tagging](https://git-scm.com/book/en/v2/Git-Basics-Tagging)

[Managing releases in a repository](https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository)
